local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

local Window = Rayfield:CreateWindow({
    Name = "Jujutsu Shenanigans",
    LoadingTitle = "Better Downslam",
    LoadingSubtitle = "by you",
    ConfigurationSaving = {
        Enabled = false
    }
})

local MainTab = Window:CreateTab("Main", 4483362458)

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local LocalPlayer = Players.LocalPlayer
local KnitServices = ReplicatedStorage:WaitForChild("Knit"):WaitForChild("Knit"):WaitForChild("Services")

local AutoEnabled = false
local Mode = "Down"

local ActivatedRemotes = {}

for _, service in ipairs(KnitServices:GetChildren()) do
    local reFolder = service:FindFirstChild("RE")
    if reFolder then
        local activated = reFolder:FindFirstChild("Activated")
        if activated and activated:IsA("RemoteEvent") then
            ActivatedRemotes[activated] = true
        end
    end
end

MainTab:CreateDropdown({
    Name = "Downslam Mode",
    Options = {"Down", "Up"},
    CurrentOption = {"Down"},
    MultipleOptions = false,
    Flag = "ModeSelect",
    Callback = function(Option)
        Mode = Option[1]
    end,
})

MainTab:CreateToggle({
    Name = "Better Downslam",
    CurrentValue = false,
    Flag = "BetterDownslamToggle",
    Callback = function(Value)
        AutoEnabled = Value
    end,
})

local old
old = hookmetamethod(game, "__namecall", function(self, ...)
    if not AutoEnabled then
        return old(self, ...)
    end

    if getnamecallmethod() ~= "FireServer" then
        return old(self, ...)
    end

    if not ActivatedRemotes[self] then
        return old(self, ...)
    end

    local args = { ... }

    if args[1] == false then
        args[1] = Mode
        return old(self, unpack(args))
    end

    return old(self, ...)
end)
